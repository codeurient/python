# Задание: Анализ оценок студентов. Напишите программу, которая анализирует оценки студентов и определяет их успеваемость.

# Шаги выполнения:
# 1.	Создайте функцию analyze_grades(data), которая принимает на вход словарь (dict), где ключ — имя студента, а значение — список (list) его оценок.

# 2.	Внутри функции:
# - Используйте цикл for, чтобы пройтись по студентам и их оценкам.
# - Определите средний балл для каждого студента.
# - Добавьте результат в новый словарь, где ключ — имя студента, а значение — его средний балл.

# 3.	Используйте if, чтобы определить:
# - Кто из студентов имеет средний балл выше 80 (отличники).
# - Кто имеет средний балл ниже 50 (нуждаются в помощи).

# 4.	Соберите всех отличников в множество (set) и всех студентов, которым нужна помощь, в другой set.

# 5.	Используйте цикл while, чтобы дать пользователю возможность вводить имена студентов и получать их средний балл из словаря.

# 6.	Выведите на экран:
# - Средний балл всех студентов.
# - Список отличников.
# - Список студентов, которым нужна помощь.

# ❗ Важно: В коде должна использоваться своя функция def, а также list, tuple, dict, set, if, for, while.




# Код который вы будете писать будет анализировать оценки студентов, вычислять их средний балл, определять отличников и тех, кому 
# нужна помощь. Также будет позволять пользователю вводить имя студента, чтобы узнать его средний балл.




# 1) Шаг за шагом будете объяснить мне код как он работает

# 2) А тут одна подсказка для вас: 

# Сначало в начале кода писать 

# import statistics 

# statistics это модуль в котором есть метод mean()

# Этот метод считает средний балл. То есть когда из словарья { } будете получать данные, тогда с помощю метода mean() можно считать средний 
# балл и результат сохранить в переменную и так далее дальше вы сами.... a = statistics.mean(grades)

import statistics

def analyze_grades(data):
    student_averages = {}  # dict для хранения среднего балла каждого студента
    excellent_students = set()  # set для отличников
    struggling_students = set()  # set для студентов, которым нужна помощь

    for student, grades in data.items():  # Перебираем всех студентов
        if grades:  # Проверяем, есть ли у студента оценки
            avg_grade = statistics.mean(grades)  # Считаем средний балл
            student_averages[student] = avg_grade  # Добавляем в словарь

            # Проверяем, попадает ли студент в одну из категорий
            if avg_grade > 80:
                excellent_students.add(student)
            elif avg_grade < 50:
                struggling_students.add(student)
    
    return student_averages, excellent_students, struggling_students

# Пример данных: словарь студентов и их оценок
students_data = {
    "Алексей": [85, 90, 78, 92],
    "Мария": [40, 55, 38, 45],
    "Иван": [70, 75, 72, 68],
    "Ольга": [95, 88, 91, 94],
    "Сергей": [30, 45, 40, 35]
}

# Вызываем функцию
averages, excellent, struggling = analyze_grades(students_data)

# Вывод результатов
print("Средний балл каждого студента:")
for student, avg in averages.items():
    print(f"{student}: {avg:.2f}")

print("\nОтличники:", excellent)
print("Студенты, которым нужна помощь:", struggling)

# Цикл while для запроса баллов
while True:
    name = input("Введите имя студента (или 'exit' для выхода): ")
    if name.lower() == "exit":
        break
    elif name in averages:
        print(f"Средний балл {name}: {averages[name]:.2f}")
    else:
        print("Студент не найден.")
